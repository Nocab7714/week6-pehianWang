import{o as r,c as i,d as t,F as p,f as _,g,t as c,h as m,v as C}from"./index-49b33024.js";import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";const{VITE_APP_URL:d,VITE_APP_PATH:n}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"peihanwang-hexschool",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},x={data(){return{products:[],productId:"",cart:{},loadingItem:""}},methods:{getProducts(){this.$http.get(`${d}/v2/api/${n}/products/all`).then(e=>{this.products=e.data.products}).catch(e=>{alert(e)})},openModal(e){this.productId=e},getCart(){this.$http.get(`${d}/v2/api/${n}/cart`).then(e=>{this.cart=e.data.data}).catch(e=>{alert(e.message)})},upDataCartItem(e){const s={product_id:e.product.id,qty:e.qty};this.$http.put(`${d}/v2/api/${n}/cart/${e.id}`,{data:s}).then(h=>{this.getCart()}).catch(h=>{alert(h.message)})},deleteCartItem(e){this.$http.delete(`${d}/v2/api/${n}/cart/${e.id}`).then(s=>{this.getCart(),alert(s.data.message)}).catch(s=>{alert(s.message)})},deleteAllCartItem(e){this.cart.length>0?this.$http.delete(`${d}/v2/api/${n}/carts`).then(s=>{this.getCart(),alert(s.data.message)}).catch(s=>{alert(s.message)}):alert("您的購物車並沒有任何商品喔")}},mounted(){this.getProducts(),this.getCart()}},$={class:"table align-middle"},f=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-end"},"單價")])],-1),I=["onClick","disabled"],P={class:"input-group input-group-sm"},b=["onUpdate:modelValue","onClick","disabled"],y=["value"],V={class:"ms-2"},k={class:"text-end"},A=t("td",{colspan:"3",class:"text-end"},"總計",-1),E={class:"text-end"},D=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),T={class:"text-end text-success"};function R(e,s,h,S,o,u){return r(),i("table",$,[f,t("tbody",null,[o.cart.carts?(r(!0),i(p,{key:0},_(o.cart.carts,a=>(r(),i("tr",{key:a.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>u.deleteCartItem(a),disabled:a.id===o.loadingItem}," x ",8,I)]),t("td",null,c(a.product.title),1),t("td",null,[t("div",P,[m(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":l=>a.qty=l,onClick:l=>u.upDataCartItem(a),disabled:a.id===o.loadingItem},[(r(),i(p,null,_(25,l=>t("option",{key:l+"123",value:l},c(l),9,y)),64))],8,b),[[C,a.qty]]),t("div",V,c(a.product.unit),1)])]),t("td",k,c(a.total),1)]))),128)):g("",!0)]),t("tfoot",null,[t("tr",null,[A,t("td",E,c(o.cart.total),1)]),t("tr",null,[D,t("td",T,c(o.cart.final_total),1)])])])}const B=v(x,[["render",R]]);export{B as default};
